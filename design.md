# Deco

Deco是一个旨在提高数据包编写效率的编程语言，提供了一系列有用的特性和语法，让数据包开发者能更快地开发数据包，语言需要对我的世界数据包提供的各种特性进行高层级的抽象。

## 源文件

Deco的程序源文件以`.deco`为后缀，每一个文件中可以有一个或多个函数。

## 库


## 基本类型

### boolean

布尔型，其实是用整数来存储的，1为true，其余为false

### int

整数型

### string

字符串，字符串作为参数和返回值仅在1.20.2及之后版本的deco中支持，因为处理需要使用宏函数。

## 函数

函数其实直接对应于我的世界数据包中的函数，使用`func`关键字定义。

```
void functionName() {

}
```

编译过程中函数名会被分配一个随机id，同时编译后所在位置也不和源代码中一致，因为大部分函数都是被数据包中的其他函数调用的，即使有特定函数需要直接在游戏内以指定资源路径调用，系统也提供了一个内置的函数修饰符`@name`，表示被修饰的函数在编译过程中将被安置到对应命名空间的对应路径中，如`@name("deco:player/test")`编译后会在`deco`命名空间中生成一个`player/test.mcfunction`。

### 函数参数

函数可以带有若干个参数，参数的传递方式取决于参数的类型，对于boolean和int型，直接使用一个临时计分板来传递，其他类型要特殊处理，某些类型的数据可能需要使用宏函数来传递。

```
int functionName(type1 arg1, type2 arg2, ...) {

}
```

### 函数返回值

通过以下格式来定义函数返回值（不写则表示无返回值）：

```
int functionName() {

}
```

定义了返回值的函数必须要进行返回，否则编译时会报错。

返回值的处理和函数参数的传递一样，也是不同类型有不同的传递方法。

### 函数修饰符

使用`@annotation`来修饰函数，可以让函数具有某些特性。

Deco应当提供一个用于开发新的函数修饰符的接口。

#### 函数标签修饰符

`@load`、`@tick`、`@tag("your_tag")`用于给函数添加上特定的标签。

#### 事件绑定修饰符

Deco核心库提供一些基本游戏事件的绑定修饰符，如`@onPlaceBlock`：

```
@onPlaceBlock("minecraft:stone")
void place_block() {
    // 这个函数会在玩家放置石头的时候被执行
}
```

事件绑定修饰符应当自己处理好一些问题，比如执行位置、执行者@s等，事件通常是从某个地方然后调用被绑定函数，因此要在调用的时候处理好各种参数，比方说上述`onPlaceBlock`修饰符，执行位置应当是被放置方块的位置（这应该是符合大家的下意识想法的），也就是如果在函数里去使用如`setblock ~ ~ ~ minecraft:air`那就应当是在放置的石块处生成air方块，同时执行者应当是放方块的玩家，也就是可以直接在函数里使用@s来引用玩家。

如果要制作新的第三方的事件绑定修饰符，应当注意上述问题，同时要在自己的库文档中写清楚不同的参数对应什么。